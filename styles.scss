:root {
	--opacity: 0.6;
	--line-height: 1.8;
	--line-height-minimal: 1.6;
}

div.chat-view-bubble-mode-default>h2.chat-view-header,
div.chat-view-bubble-mode-default>h3.chat-view-header,
div.chat-view-bubble-mode-default>h4.chat-view-header,
div.chat-view-bubble-mode-default>h5.chat-view-header,
div.chat-view-bubble-mode-default>h6.chat-view-header {
	margin: 0;
	margin-bottom: 8px;
}

div.chat-view-bubble-mode-minimal>h2.chat-view-header,
div.chat-view-bubble-mode-minimal>h3.chat-view-header,
div.chat-view-bubble-mode-minimal>h4.chat-view-header,
div.chat-view-bubble-mode-minimal>h5.chat-view-header,
div.chat-view-bubble-mode-minimal>h6.chat-view-header {
	margin: 0;
	margin-bottom: 4px;
}

div.chat-view-bubble-mode-default>p.chat-view-message {
	margin: 0;
	margin-bottom: 2px;
	line-height: var(--line-height);
}

div.chat-view-bubble-mode-minimal>p.chat-view-message {
	margin: 0;
	line-height: var(--line-height-minimal);
}

sub.chat-view-subtext {
	opacity: var(--opacity);
}

.chat-view-comment {
	width: fit-content;
	max-width: 90%;
	margin: 24px auto;
	line-height: var(--line-height);
	text-align: center;
	opacity: var(--opacity);
}

div.chat-view-bubble {
	/* width: fit-content; */
	position: relative;
	min-width: 30%;
	width: 100%;
}

div.chat-view-bubble-mode-default {
	padding: 12px;
	background-color: rgba(0, 0, 0, 0.075);
	border: 2px solid rgba(255, 255, 255, 0.15);
	border-radius: 16px;
}

div.chat-view-bubble-mode-minimal {
	padding: 4px 0px;
	background-color: transparent;
}

.chat-view-mobile-width {
	max-width: 85%;
}

.chat-view-desktop-width {
	max-width: 75%;
}

.chat-view-max-width-50 {
	max-width: 50%;
}

.chat-view-max-width-55 {
	max-width: 55%;
}

.chat-view-max-width-60 {
	max-width: 60%;
}

.chat-view-max-width-65 {
	max-width: 65%;
}

.chat-view-max-width-70 {
	max-width: 70%;
}

.chat-view-max-width-75 {
	max-width: 75%;
}

.chat-view-max-width-80 {
	max-width: 80%;
}

.chat-view-max-width-85 {
	max-width: 85%;
}

.chat-view-max-width-90 {
	max-width: 90%;
}

div.chat-view-default-vertical-margin {
	margin-top: 18px;
}

div.chat-view-small-vertical-margin {
	margin-top: 12px;
}

div.chat-view-align-left {
	border-top-left-radius: 0;
	margin-left: 0;
	margin-right: auto;
}

div.chat-view-align-right {
	border-top-right-radius: 0;
	margin-left: auto;
	margin-right: 0;
}

div.chat-view-align-center {
	margin-left: auto;
	margin-right: auto;
}

div.delimiter {
	width: fit-content;
	margin: 24px auto;
}

div.delimiter div.dot {
	display: inline-block;
	width: 6px;
	height: 6px;
	margin: 0px 4px;
	border-radius: 60%;
	background-color: currentColor;
	opacity: var(--opacity);
}

div.chat-view-blue>.chat-view-header {
	color: #08F;
}

div.chat-view-green>.chat-view-header {
	color: #2B5;
}

div.chat-view-yellow>.chat-view-header {
	color: #ED0;
}

div.chat-view-orange>.chat-view-header {
	color: #F80;
}

div.chat-view-red>.chat-view-header {
	color: #F33;
}

div.chat-view-purple>.chat-view-header {
	color: #B2C;
}

div.chat-view-grey>.chat-view-header {
	color: #999;
}

div.chat-view-brown .chat-view-header {
	color: #A71;
}

div.chat-view-indigo .chat-view-header {
	color: #75F;
}

div.chat-view-teal .chat-view-header {
	color: #0AA;
}

div.chat-view-pink .chat-view-header {
	color: #F2A;
}

div.chat-view-slate .chat-view-header {
	color: #78A;
}

div.chat-view-wood .chat-view-header {
	color: #EE6a44;
}

/* LincZero魔改所新增的样式 */

// 默认明亮模式。obsidian版用theme-xxx，vuepress版用data-theme，app版两者都用。不存把:root和light合并，会有bug
:root {
	--qq-width: 100%;
	--qq-max-height: 1100px;
	--qq-msg-max-width: calc(var(--qq-width) - var(--qq-width-icon) - var(--qq-width-icon) - 25px - 25px);
	--qq-width-icon: 55px;

	--qq-font-size: 16px; /* --front-text-size --code-size or 16px */

	// 默认明亮模式
	--qq-text-color: #333;
	--qq-msg-bg-color: rgb(238, 243, 248);
	--qq-msg-color: black;
	--qq-bg-color: #ffffff;
}
.theme-light,
html[data-theme="light"] {
	--qq-text-color: #333;
	--qq-msg-bg-color: rgb(238, 243, 248);
	--qq-msg-color: black;
	--qq-bg-color: #ffffff;
}
.theme-dark,
html[data-theme="dark"] {
	--qq-text-color: rgb(94, 94, 94);
	--qq-msg-bg-color: rgb(35, 35, 35);
	--qq-msg-color: rgb(253, 253, 253);
	--qq-bg-color: rgb(1, 1, 1);
}
// pc/vuepress状态下，字体变小
.pc-chat, html[data-theme="light"], html[data-theme="dark"] {
	.cv-note, .block-language-chat-qq, .block-language-chat-wechat {
		.chat-view-qq-message-all {
			font-size: var(--qq-font-size);
		}
	}
}
/*@font-face {
	font-family: 'NotoColorEmoji';
	src: url('./font/NotoColorEmoji.ttf') format('truetype');
}*/

body,
html {
	margin: 0px;
	padding: 0px;
	width: 100%;
	height: 100%;
}

div.cv-note, div.block-language-chat-qq, div.block-language-chat-wechat {
	.chat-view-qq-message-all p:first-child { margin-top: 0; }
	.chat-view-qq-message-all p:last-child { margin-bottom: 0; }

	width: var(--qq-width); 
	max-height: var(--qq-max-height);
	overflow-y: scroll;
	font-family: 'Microsoft YaHei', 'MSYH', /*'NotoColorEmoji',*/ Helvetica Neue, Helvetica, PingFang SC, Hiragino Sans GB, å¾®è½¯é›…é»‘, Arial, sans-serif;
	background-color: var(--qq-bg-color);
}

.time {
	color: var(--qq-text-color);
	font-size: small;
	text-align: center;
	padding-top: 25px;
	padding-bottom: 10px;
}

.chat-view-bubble-mode-qq, .chat-view-bubble-mode-wechat {
	.chat-view-bubble {
		font-size: var(--qq-font-size);
		margin-top: 0.7em;
		margin-bottom: 0.7em;
	}
	.chat-view-default-vertical-margin {
		clear: both;
		min-height: var(--qq-msg-height);
	}
}

.chat-view-qq-comment {
	color: var(--qq-text-color);
}

.chat-view-qq-icon {
	display: inline-block;
	width: calc(var(--qq-width-icon) + 25px); // 外边距15, 内边距10
	padding-top: 0;
	>img {
		background-color: #eee; // or var(--qq-bg-color); 主要是默认图标以明亮模式获取 (避免带alpha)，等什么时候能分别获取两种主题的图标时，再用对应背景
		width: var(--qq-width-icon);
		height: var(--qq-width-icon);
		border-radius: 50%;
	}
}
.chat-view-align-left .chat-view-qq-icon {
	float: left;
	>img { margin-left: 15px; margin-right: 10px; }
}
.chat-view-align-right .chat-view-qq-icon {
	float: right;
	>img { margin-right: 15px; margin-left: 10px; }
}

.chat-view-qq-dateTime {
	box-sizing: border-box;
	margin: 0;
	height: Max(14px, calc(var(--qq-width-icon) / 2));
	position: absolute;
	top: -8px;
	left: 50%;

	padding: 0;
	transform: translate(-50%, 0);
	opacity: 0.7;
}

.chat-view-qq-title {
	margin: 0;
	padding: 0;
	margin-top: Max(25px, calc(var(--qq-width-icon) / 2));
	height: 0;
	width: 100%;
	position: relative;

	// 允许文字高于头像 (因为忽略头像的做法就是尺寸改为0)
	.chat-view-qq-titlesub {
		position: absolute;
		width: 100%;
		bottom: 0;
		height: Max(14px, calc(var(--qq-font-size) + 6px));

		line-height: Max(14px, calc(var(--qq-font-size) + 6px));
		font-size: Max(14px, calc(var(--qq-font-size) - 1px));
		padding-bottom: 0.15em;

		p {
			height: 100%;
			margin: 0 0.2em;
		}
		.chat-view-qq-groupTitle{
			font-weight: bold;
			padding: 0 0.3em 0 0.3em;
			border-radius: 0.4em;
			color: #f6fefd;
			background-color: #a8b0c5;
		
			&[title$="管理员"]{
				background-color: rgb(61, 226, 212);
			}
			&[title$="群主"]{
				background-color: rgb(255, 213, 57);
			}
		}
		.chat-view-qq-sender {
			margin: 0 0.2em;
			overflow-x: hidden;
			text-overflow: ellipsis;
		}
	}
}

.chat-view-qq-msg {
	box-sizing: border-box;
	display: inline-block;
	margin: 0;
	max-width: var(--qq-msg-max-width);

	word-wrap: break-word;
	color: var(--qq-text-color);
	padding: 0 15px;
}

.chat-view-qq-msg>.pop { width: 100%; margin-top: 1px; }
.chat-view-align-left {
	.chat-view-qq-msg, .pop { float: left; }
}
.chat-view-align-right {
	.chat-view-qq-msg, .pop { float: right; }
}

.shape-zero {
	width: 100%;
	height: 0;
}
.shape {
	display: inline-block;
	position: relative;
	width: 0;
	height: 0;
	border-top: 0px solid transparent;
	border-bottom: var(--qq-font-size) solid transparent;
}
// 左右差异
.chat-view-align-left .shape {
	right: 0;
	transform: translate(-100%, 0);
	border-right: 0 solid transparent;
	border-left: 13px solid transparent;
	border-top: 13px solid var(--qq-msg-bg-color); // 与上对齐
	border-bottom: 13px solid transparent;
}
.chat-view-align-right .shape {
	left: 100%;
	transform: translate(0, 0);
	border-left: 0 solid transparent;
	border-right: 13px solid transparent;
	border-top: 13px solid var(--qq-msg-bg-color); // 与上对齐
	border-bottom: 13px solid transparent;
}
.chat-view-align-left .chat-view-qq-groupTitle,
.chat-view-align-left .chat-view-qq-sender {
	float: left;
}
.chat-view-align-right .chat-view-qq-groupTitle,
.chat-view-align-right .chat-view-qq-sender {
	float: right;
}

.shape,
.chat-view-qq-message-all {
	margin-top: 0;
}

.chat-view-qq-message-all {
	box-sizing: border-box;
	display: inline-block; /*inline-block*/
	margin-bottom: 5px;
	position: relative; // 允许消息内容长度短于昵称
	width: auto;

	word-wrap: break-word;
	color: var(--qq-msg-color);
	font-size: 27px;
	padding: 0.6em 0.7em;
	background-color: var(--qq-msg-bg-color);
}
.chat-view-align-left .chat-view-qq-message-all {
	border-radius: 0px 10px 10px 10px;
}
.chat-view-align-right .chat-view-qq-message-all {
	border-radius: 10px 0px 10px 10px;
}
.chat-view-qq-message-text {
	margin: 0.3em 0 0.3em 0;
}
.chat-view-qq-message-img{
	width: auto;
	height: auto;
	margin: 0;
	padding: 0;
	float: 0;
}

/*.word99 {
	width: {{ info.word99 }}px;
}*/

.author {
	font-size: 13px;
	background-color: rgba(221, 219, 219, 0.842);
	border-radius: 3px;
	padding: 2px 6px 2px 6px;
}

.chat-view-desktop-width{
	max-width: none !important;
}

// 微信风格部分
// 默认明亮模式。obsidian版用theme-xxx，vuepress版用data-theme，app版两者都用。不存把:root和light合并，会有bug
:root {
	--wechat-cmsg-txcolor: #111111; // 有的框的
	--wechat-lmsg-bgcolor: #ffffff;
	--wechat-rmsg-bgcolor: #95ec69;
	--wechat-lmsg-txcolor: black;
	--wechat-rmsg-txcolor: black;
	--wechat-bgcolor: #f5f5f5;
}
.theme-light,
html[data-theme="light"] {
	--wechat-cmsg-txcolor: #111111; // 有的框的
	--wechat-lmsg-bgcolor: #ffffff;
	--wechat-rmsg-bgcolor: #95ec69;
	--wechat-lmsg-txcolor: black;
	--wechat-rmsg-txcolor: black;
	--wechat-bgcolor: #f5f5f5;
}
.theme-dark,
html[data-theme="dark"] {
	--wechat-cmsg-txcolor: #828282;
	--wechat-lmsg-bgcolor: #2c2c2c;
	--wechat-rmsg-bgcolor: #3db476;
	--wechat-lmsg-txcolor: #d1d1d1;
	--wechat-rmsg-txcolor: black;
	--wechat-bgcolor: #111111;
}
div.chat-view-bubble-mode-wechat {
	background-color: var(--wechat-bgcolor) !important;
	>.chat-view-bubble {
		>.chat-view-qq-icon>img {
			border-radius: 0;
			background-color: #eee; // or var(--wechat-bgcolor);
		}
		>.chat-view-qq-msg {
			padding: 0 6px;
		}
		.chat-view-qq-message-all {
			border-radius: 4px;
		}
		.shape-zero>.shape {
			margin-top: 13px;
		}

		// 左右差异
		&.chat-view-align-right {
			.chat-view-qq-message-all {
				background-color: var(--wechat-rmsg-bgcolor);
				color: var(--wechat-rmsg-txcolor);
			}
			.shape-zero>.shape { 
				border-left: 6px solid var(--wechat-rmsg-bgcolor);
				border-right: 6px solid transparent;
				border-top: 6px solid transparent;
				border-bottom: 6px solid transparent;
			}
		}
		&.chat-view-align-left {
			.chat-view-qq-message-all {
				background-color: var(--wechat-lmsg-bgcolor);
				color: var(--wechat-lmsg-txcolor);
			}
			.shape-zero>.shape { 
				border-right: 6px solid var(--wechat-lmsg-bgcolor);
				border-left: 6px solid transparent;
				border-top: 6px solid transparent;
				border-bottom: 6px solid transparent;
			}
		}
	}
}
